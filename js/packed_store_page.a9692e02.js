"use strict";!function(){function e(){salvattore.rescanMediaQueries()}var s;window.onresize=function(){clearTimeout(s),s=setTimeout(e,100)}}(),function(e){var s=this.sellfy||{};s.StorePageView=function(r){this.$=function(s){return e(r).find(s)},this.defaultErrorMessage=e("#failedToSendMessageError").html(),this.toggleContactSellerForm=function(e){this.$form.toggleClass("loading",e),this.$form.find(".button").toggleClass("loading disabled",e)},this.setFormClass=function(e){this.$form.removeClass("error success").addClass(e)},this.contactSeller=function(){var s=this;return this.toggleContactSellerForm(!0),e.post(window.GLOBALS.STORE_URL+"contact/",this.$form.serialize()).done((function(){s.$form.addClass("success")})).fail((function(e){var r=e.responseJSON;s.setFormClass("error"),r.errors.forEach((function(e){s.$form.find('[name="{0}"]'.format(e.label.toLowerCase())).parent().addClass("error")}))})).always((function(){window.grecaptcha&&grecaptcha.reset(),s.toggleContactSellerForm(!1)})),!1},this.setFormResponseMessage=function(e,s,r){this[e].find(".message").html(s),this[e].find(".message").css("color",r)},this.subscribeToSeller=function(){var s=this,r=s.$subscribeForm.find("button");return r.addClass("loading"),e.post("/subscribe/",s.$subscribeForm.serialize()).done((function(e){s.$subscribeForm.removeClass("error"),s.setFormResponseMessage("$subscribeForm",e.message,"green"),window.grecaptcha&&grecaptcha.reset()})).fail((function(e){s.$subscribeForm.toggleClass("error"),s.setFormResponseMessage("$subscribeForm",e.responseJSON.error,"red")})).always((function(){r.removeClass("loading")})),!1},this.resendProductEmail=function(){var s=this,r=s.$resendEmailForm.find("button");return r.addClass("loading"),e.post("/recover-purchases/",s.$resendEmailForm.serialize()).done((function(e){s.$resendEmailForm.removeClass("error"),s.setFormResponseMessage("$resendEmailForm",e.message,"green"),window.grecaptcha&&grecaptcha.reset()})).fail((function(e){s.$resendEmailForm.toggleClass("error"),s.setFormResponseMessage("$resendEmailForm",e.responseJSON.error,"red")})).always((function(){r.removeClass("loading")})),!1},this.countChars=function(e){this.$formCharCounter.text(e.currentTarget.value.length)},this.render=function(){this.$form=this.$(".contact-seller-form").on("submit",e.proxy(this.contactSeller,this)),this.$formCharCounter=this.$form.find(".current-char-count"),this.$form.find("textarea").on("keyup",e.proxy(this.countChars,this)),this.$subscribeForm=this.$(".subscribe-to-store").on("submit",e.proxy(this.subscribeToSeller,this)),this.$resendEmailForm=this.$(".resend-purchase-email").on("submit",e.proxy(this.resendProductEmail,this)),this.cart=new s.CartView(".navigation .shopping-cart-widget"),this.cart.init()},this.render()},this.sellfy=s}.call(window,jQuery),sellfy.StorePageView("body");var submitContactForm=function(){$(".contact-seller-form").submit()},submitSubscriptionForm=function(){$(".subscribe-to-store").submit()},submitPurchaseEmailForm=function(){$(".resend-purchase-email").submit()};